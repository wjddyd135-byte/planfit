<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Planfit - Login</title>
  <link rel="stylesheet" href="styles/style.css" />
  <link rel="stylesheet" href="styles/login.css" />
</head>

<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">Planfit</div>
      <nav class="side-nav">
        <a href="index.html">í™ˆ</a>
        <a href="menu.html">ë©”ë‰´</a>
        <a href="start.html">ìš´ë™ ì‹œì‘</a>
        <a href="record.html">ê¸°ë¡</a>
        <a class="active" href="login.html">ë§ˆì´</a>
      </nav>
    </aside>

    <div>
      <header class="header">
        <div class="header-inner">
          <div class="title">Planfit</div>
          <div class="icon-row">
            <button class="icon-btn" aria-label="search">ğŸ”</button>
            <a class="icon-btn" href="menu.html" aria-label="menu">â˜°</a>
            <a class="icon-btn" href="login.html" aria-label="login">ğŸ‘¤</a>
          </div>
        </div>
      </header>

      <main class="main">
        <div class="container">
          <section class="card login-card">
            <div class="login-top">
              <div class="login-badge">Planfit</div>
              <h1 class="login-title">login</h1>
              <p class="login-sub">ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”</p>
            </div>

            <form class="login-form" action="#" method="post">
              <div class="field">
                <label class="small" for="id">ID</label>
                <input class="input" id="id" name="id" type="text" placeholder="ì•„ì´ë””" autocomplete="username" />
              </div>

              <div class="field">
                <label class="small" for="pw">PASSWORD</label>
                <input class="input" id="pw" name="pw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸"
                  autocomplete="current-password" />
              </div>

              <div class="login-row">
                <label class="remember">
                  <input id="remember" type="checkbox">
                  ë¡œê·¸ì¸ ìœ ì§€
                </label>
                <a class="link" href="#">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
              </div>

              <button class="btn btn-primary" type="submit">login</button>

              <div class="or">
                <span></span><em>ë˜ëŠ”</em><span></span>
              </div>

              <div class="social">
                <button class="btn btn-ghost" type="button">
                  <span class="dot dot-n"></span> ë„¤ì´ë²„ë¡œ ë¡œê·¸ì¸
                </button>
                <button class="btn btn-ghost" type="button">
                  <span class="dot dot-k"></span> ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸
                </button>
                <button class="btn btn-ghost" type="button">
                  <span class="dot dot-g"></span> êµ¬ê¸€ë¡œ ë¡œê·¸ì¸
                </button>
              </div>

              <div class="signup">
                ì•„ì§ ê³„ì •ì´ ì—†ë‚˜ìš”? <a class="link" href="signup.html">íšŒì›ê°€ì…</a>
              </div>
            </form>
          </section>
        </div>
      </main>

      <nav class="bottom-nav">
        <div class="bottom-nav-inner">

          <a class="tab" href="index.html" aria-label="í™ˆ">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z" />
            </svg>
            <span>í™ˆ</span>
          </a>

          <a class="tab" href="menu.html" aria-label="ë©”ë‰´">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <span>ë©”ë‰´</span>
          </a>

          <a class="tab" href="start.html" aria-label="ì‹œì‘">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3v18M3 12h18" />
            </svg>
            <span>ì‹œì‘</span>
          </a>

          <a class="tab active" href="login.html" aria-label="ë§ˆì´">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4 0-8 2-8 5v1h16v-1c0-3-4-5-8-5z" />
            </svg>
            <span>ë§ˆì´</span>
          </a>

        </div>
      </nav>

    </div>
  </div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const loginForm = document.querySelector(".login-form");
    if (!loginForm) return;

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const emailOrId = document.getElementById("id").value.trim(); 
      const password = document.getElementById("pw").value;
      const remember = document.getElementById("remember")?.checked;

      const users = JSON.parse(localStorage.getItem("planfit_users")) || [];

      const user = users.find(u => u.email === emailOrId);

      if (!user) {
        alert("ê°€ì…ëœ ê³„ì •ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”. íšŒì›ê°€ì…ì„ ë¨¼ì € í•´ì£¼ì„¸ìš”.");
        return;
      }

      if (user.password !== password) {
        alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        return;
      }

      const storage = remember ? localStorage : sessionStorage;
      storage.setItem("planfit_current_user", JSON.stringify({
        email: user.email,
        nickname: user.nickname,
        goal: user.goal,
        loggedInAt: new Date().toISOString()
      }));

      localStorage.setItem("planfit_logged_in", "1");

      alert(`${user.nickname}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`);
      location.href = "mypage.html";
    });
  });
</script>
</body>
</html>