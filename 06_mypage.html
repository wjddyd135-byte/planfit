<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Planfit - My</title>
  <link rel="stylesheet" href="styles/style.css" />
</head>

<body class="page-home">
  <div class="app">
    <aside class="sidebar">
      <div class="brand">Planfit</div>
      <nav class="side-nav" aria-label="사이드 메뉴">
        <a href="index.html">홈</a>
        <a href="menu.html">메뉴</a>
        <a href="start.html">운동 시작</a>
        <a href="record.html">기록</a>
        <a class="active" href="mypage.html">마이</a>
      </nav>
    </aside>

    <div>
      <header class="header">
        <div class="header-inner">
          <div class="title">마이</div>
          <div class="icon-row">
            <a class="icon-btn" href="login.html" aria-label="login">👤</a>
            <a class="icon-btn" href="settings.html" aria-label="설정">⚙️</a>
          </div>
        </div>
      </header>

      <main class="main">
        <div class="container">
          <p class="small">내 정보 · 기록 · 설정</p>
          <h1 class="h1">내 페이지</h1>

          <section id="guestView" class="card" style="margin-top:12px;">
            <h2 class="sr-only">게스트 화면</h2>

            <div style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start;">
              <div>
                <div style="font-weight:900;">게스트</div>
                <p class="sub">로그인하면 기록/즐겨찾기가 저장돼요</p>
                <div class="small">목표: 근육 증가 · 주 3회</div>
              </div>

              <span
                style="padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.05);border:1px solid var(--line);font-size:12px;color:var(--mint);white-space:nowrap;">
                로그인 필요
              </span>
            </div>

            <div style="display:flex;gap:10px;margin-top:12px;">
              <a class="btn btn-primary" href="login.html"
                style="flex:1;display:inline-block;text-align:center;">로그인</a>
              <a class="btn btn-ghost" href="menu.html" style="flex:1;display:inline-block;text-align:center;">메뉴 보기</a>
            </div>
          </section>

          <section id="userView" style="display:none;">
            <h2 class="sr-only">로그인 사용자 화면</h2>

            <div class="card" style="margin-top:12px;">
              <div style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start;">
                <div id="mpName" style="font-weight:900;">OO 님</div>
                <p class="sub">오늘도 한 걸음 더 💪</p>
                <div id="mpGoal" class="small">목표: -</div>

                <button class="btn btn-ghost" id="logoutBtn" type="button"
                  style="width:auto;padding:10px 14px;border-radius:14px;">
                  로그아웃
                </button>
              </div>

              <div style="display:flex;gap:10px;margin-top:12px;">
                <a class="btn btn-primary" href="start.html" style="flex:1;display:inline-block;text-align:center;">운동
                  시작</a>
                <a class="btn btn-ghost" href="menu.html" style="flex:1;display:inline-block;text-align:center;">루틴
                  보기</a>
              </div>
            </div>

            <section class="grid-2" style="margin-top:12px;">
              <h3 class="sr-only">내 요약 카드</h3>

              <div class="card">
                <div style="font-weight:900;">이번 주 운동</div>
                <p class="sub">목표 달성 현황</p>
                <div style="font-size:28px;font-weight:900;margin-top:6px;">1 / 3</div>
                <div class="small">최근 운동: 상체 + 코어</div>
              </div>

              <div class="card">
                <div style="font-weight:900;">즐겨찾기</div>
                <p class="sub">저장한 루틴</p>
                <div class="small" style="margin-top:8px;">상체 루틴 · 하체 루틴</div>
                <a class="btn btn-ghost" href="menu.html"
                  style="margin-top:12px;display:inline-block;text-align:center;">루틴 보러가기</a>
              </div>
            </section>

            <h2 class="h1" style="margin-top:28px;">바로가기</h2>
            <section class="grid-2" style="margin-top:12px;">
              <h3 class="sr-only">바로가기 링크</h3>

              <a class="card" href="record.html" style="display:block;">
                <div style="font-weight:800;">운동 기록</div>
                <p class="sub">최근 운동 히스토리</p>
                <div class="small">주/월 요약 보기</div>
              </a>

              <a class="card" href="#" style="display:block;">
                <div style="font-weight:800;">프로필 설정</div>
                <p class="sub">키/몸무게/목표</p>
                <div class="small">추천 정확도 향상</div>
              </a>
            </section>
          </section>

          <h2 class="h1" style="margin-top:28px;">설정</h2>
          <section class="grid-2" style="margin-top:12px;">
            <h3 class="sr-only">설정 메뉴</h3>

            <a href="settings.html" class="card" style="display:block;">
              <div style="font-weight:800;">설정</div>
              <div class="small">목표 · 테마 · 데이터 관리</div>
            </a>

            <a class="card" href="#" style="display:block;">
              <div style="font-weight:800;">앱 정보</div>
              <p class="sub">버전 · 문의</p>
            </a>
          </section>

        </div>
      </main>

      <footer class="footer" role="contentinfo" aria-label="하단 정보">
        <div class="footer-inner">
          <div class="footer-links">
            <a href="privacy.html">개인정보처리방침</a>
            <span class="sep" aria-hidden="true">|</span>
            <a href="terms.html">이용약관</a>
          </div>

          <p class="footer-desc">Planfit은 더 나은 운동 루틴 경험을 위해 설계된 서비스입니다.</p>
          <p class="footer-copy">Copyright © 2026 Planfit. All rights reserved.</p>
        </div>
      </footer>

      <nav class="bottom-nav" aria-label="하단 메뉴">
        <div class="bottom-nav-inner">
          <a class="tab" href="index.html" aria-label="홈">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z" />
            </svg>
            <span>홈</span>
          </a>

          <a class="tab" href="menu.html" aria-label="메뉴">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <span>메뉴</span>
          </a>

          <a class="tab" href="start.html" aria-label="시작">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3v18M3 12h18" />
            </svg>
            <span>시작</span>
          </a>

          <a class="tab active" href="mypage.html" aria-label="마이">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4 0-8 2-8 5v1h16v-1c0-3-4-5-8-5z" />
            </svg>
            <span>마이</span>
          </a>
        </div>
      </nav>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {

    const userRaw =
      localStorage.getItem("planfit_current_user") ||
      sessionStorage.getItem("planfit_current_user");

    const guestView = document.getElementById("guestView");
    const userView = document.getElementById("userView");
    const logoutBtn = document.getElementById("logoutBtn");

    const nameEl = document.getElementById("mpName");
    const goalEl = document.getElementById("mpGoal");

    if (!userRaw) {
      if (guestView) guestView.style.display = "block";
      if (userView) userView.style.display = "none";
      return;
    }

    let user;
    try {
      user = JSON.parse(userRaw);
    } catch (e) {
      localStorage.removeItem("planfit_current_user");
      sessionStorage.removeItem("planfit_current_user");
      if (guestView) guestView.style.display = "block";
      if (userView) userView.style.display = "none";
      return;
    }

    if (guestView) guestView.style.display = "none";
    if (userView) userView.style.display = "block";

    const goalText =
      user.goal === "muscle" ? "근육 증가" :
      user.goal === "diet" ? "체지방 감량" :
      user.goal === "maintain" ? "컨디션 유지" :
      (user.goal || "-");

    if (nameEl) nameEl.textContent = `${user.nickname || "사용자"} 님`;
    if (goalEl) goalEl.textContent = `목표: ${goalText}`;

    if (logoutBtn) {
      logoutBtn.addEventListener("click", () => {
        localStorage.removeItem("planfit_current_user");
        sessionStorage.removeItem("planfit_current_user");

        localStorage.removeItem("planfit_logged_in");

        alert("로그아웃 되었습니다.");
        location.reload();
      });
    }
  });
</script>
</body>
</html>